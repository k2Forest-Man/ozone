(()=>{"use strict";(function(){const e=document.querySelector(".goods");return fetch("./db/db.json").then((e=>{if(e.ok)return e.json();throw new Error("Data don't receivet, error: "+e.status)})).then((e=>e)).catch((t=>{console.warn(t),e.innerHTML="<div>Upss  </div>"}))})().then((e=>{!function(e){const t=document.querySelector(".goods");e.goods.forEach((e=>{const n=document.createElement("div");n.className="col-12 col-md-6 col-lg-4 col-xl-3",n.innerHTML=`\n                  <div class="card" data-category="${e.category}">\n                  ${e.sale?"<div class='card-sale'>ðŸ”¥Hot SaleðŸ”¥</div>":""}\n                    <div class="card-img-wrapper">\n                      <span class="card-img-top" style="background-image: url('${e.img}');"></span>\n                    </div>\n                    <div class="card-body justify-content-between">\n                    <div class="card-price" style="${e.sale?"color:red":""}" >${e.price} â‚½</div>\n                      <h5 class="card-title">${e.title}</h5>\n                      <button class="btn btn-primary">Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ</button>\n                    </div>\n                  </div>\n                `,t.appendChild(n)}))}(e),function(){const e=document.querySelectorAll(".goods .card"),t=document.querySelector(".catalog-button"),n=document.querySelector(".catalog-list"),c=document.querySelector(".catalog"),o=new Set;t.addEventListener("click",(function(t){c.style.display?c.style.display="":c.style.display="block","LI"===t.target.tagName&&e.forEach((e=>{e.dataset.category===t.target.textContent?e.parentNode.style.display="":e.parentNode.style.display="none"}))})),e.forEach((e=>{o.add(e.dataset.category)})),o.forEach((e=>{const t=document.createElement("li");t.textContent=e,n.appendChild(t),console.log(e)}))}(),document.querySelectorAll(".filter-check_checkbox").forEach((e=>{e.addEventListener("change",(function(){this.checked?this.nextElementSibling.classList.add("checked"):this.nextElementSibling.classList.remove("checked")}))})),function(){const e=document.querySelectorAll(".goods .card"),t=document.querySelector("#discount-checkbox"),n=document.querySelector(".goods"),c=document.querySelector("#min"),o=document.querySelector("#max"),r=document.querySelector(".search-wrapper_input"),l=document.querySelector(".search-btn");function d(t){const n=new RegExp(r.value.trim(),"i");e.forEach((e=>{const t=e.querySelector(".card-title");n.test(t.textContent)?e.parentNode.style.display="":e.parentNode.style.display="none"})),("click"==event.type||"Enter"==event.key)&&(r.value="")}function a(){e.forEach((e=>{const r=e.querySelector(".card-price"),l=parseFloat(r.textContent),d=e.querySelector(".card-sale");c.value&&l<c.value||o.value&&l>o.value||t.checked&&!d?e.parentNode.remove():n.appendChild(e.parentNode)}))}t.addEventListener("click",a),c.addEventListener("change",a),o.addEventListener("change",a),r.addEventListener("keyup",d),l.addEventListener("click",d)}(),function(){let e=document.querySelector("#cart"),t=document.querySelector(".cart"),n=document.querySelector(".cart-close");e.addEventListener("click",(function(){document.body.style.overflow="hidden",t.style.display="flex"})),n.addEventListener("click",(function(){t.style.display="none",document.body.style.overflow=""})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&(t.style.display="flex")&&(e.preventDefault(),t.style.display="none",document.body.style.overflow="")}))}(),function(){let e=document.querySelectorAll(".goods  .card"),t=document.querySelector(".cart-wrapper"),n=document.querySelector("#cart-empty"),c=document.querySelector(".counter");function o(){let e=t.querySelectorAll(".card");c.textContent=e.length,0!==e.length?n.remove():t.appendChild(n)}function r(){let e=t.querySelectorAll(".card-price"),n=document.querySelector(".cart-total span"),c=0;e.forEach((e=>{c+=parseFloat(e.innerHTML)})),n.textContent=c}e.forEach((e=>{e.querySelector("button").addEventListener("click",(()=>{let n=e.cloneNode(!0);t.appendChild(n),o(),r();const c=n.querySelector(".btn");c.textContent="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€",c.addEventListener("click",(()=>{n.remove(),o(),r()}))}))}))}()}))})();